# REQUIRES: system-linux && native && target-x86_64

# Scenario 5 negative:
# * An "only-keep-debug" stripped, split binary with a _missing_
# * --add-gnu-debuglink symbol file.

# RUN: rm -rf %t
# RUN: mkdir -p %t

# RUN: yaml2obj %p/Inputs/bin-split-stripped.yaml -o %t/bin-split-stripped.tmp
# RUN: yaml2obj %p/Inputs/sym-split.yaml -o %t/sym-split
# RUN: llvm-objcopy %t/bin-split-stripped.tmp --add-gnu-debuglink=%t/sym-split %t/bin-split-stripped
# RUN: rm %t/sym-split
# RUN: chmod a+x %t/bin-split-stripped

# RUN: %lldb -o "settings set symbols.enable-external-lookup false" \
# RUN:       -o "target create %t/bin-split-stripped" \
# RUN:       -o "target modules dump separate-debug-info" \
# RUN:       -o "quit" \
# RUN:        2>&1 | FileCheck %s

# CHECK: Current executable set to {{.*}}/bin-split-stripped' (x86_64).
# CHECK-NEXT: target modules dump separate-debug-info
# CHECK-NEXT: error: no matching executable images found

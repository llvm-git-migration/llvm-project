# REQUIRES: system-linux && native && target-x86_64

# Scenario 2 negative:
# * A stripped binary, with an "-only-keep-debug" symbols which is *not* there.
# * LLDB should fail to find the OKD file automatically using .gnu.debuglink.

# RUN: rm -rf %t
# RUN: mkdir -p %t

# RUN: yaml2obj %p/Inputs/bin-stripped.yaml -o %t/bin-stripped.tmp
# RUN: yaml2obj %p/Inputs/sym-stripped.yaml -o %t/bin-stripped.dbg
# RUN: llvm-objcopy %t/bin-stripped.tmp --add-gnu-debuglink=%t/bin-stripped.dbg %t/bin-stripped
# RUN: rm %t/bin-stripped.dbg
# RUN: chmod a+x %t/bin-stripped

# RUN: %lldb -o "settings set symbols.enable-external-lookup false" \
# RUN:       -o "target create %t/bin-stripped" \
# RUN:       -o "b func" \
# RUN:       -o "quit" \
# RUN:        2>&1 | FileCheck %s

# Should NOT have source file information:

# CHECK: Breakpoint 1: where = bin-stripped`func, address = 0x{{[0-9a-f]+}}

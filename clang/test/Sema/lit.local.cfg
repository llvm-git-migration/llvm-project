config.substitutions = list(config.substitutions)
config.substitutions.insert(
    0, (r"%clang\b", """*** Do not use the driver in Sema tests. ***""")
)

if lit_config.update_tests:
    import sys
    import os

    curdir = os.path.dirname(os.path.realpath(__file__))
    testdir = os.path.dirname(curdir)
    clangdir = os.path.dirname(testdir)
    utilspath = os.path.join(clangdir, "utils")
    sys.path.append(utilspath)
    from UpdateVerifyTests.litplugin import verify_test_updater
    lit_config.test_updaters.append(verify_test_updater)

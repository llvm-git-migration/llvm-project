// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py
// REQUIRES: amdgpu-registered-target
// RUN: %clang_cc1 -triple amdgcn-unknown-unknown -target-cpu verde -emit-llvm -o - %s | FileCheck %s --check-prefixes=VERDE
// RUN: %clang_cc1 -triple amdgcn-unknown-unknown -target-cpu tonga -emit-llvm -o - %s | FileCheck %s --check-prefixes=GFX8
// RUN: %clang_cc1 -triple amdgcn-unknown-unknown -target-cpu gfx1100 -emit-llvm -o - %s | FileCheck %s --check-prefixes=GFX11

#pragma OPENCL EXTENSION cl_khr_fp16 : enable

typedef short v2i16 __attribute__((ext_vector_type(2)));
typedef int v2i32 __attribute__((ext_vector_type(2)));
typedef half v2f16 __attribute__((ext_vector_type(2)));
typedef float v2f32 __attribute__((ext_vector_type(2)));
typedef short v4i16 __attribute__((ext_vector_type(4)));
typedef int v4i32 __attribute__((ext_vector_type(4)));
typedef half v4f16 __attribute__((ext_vector_type(4)));
typedef float v4f32 __attribute__((ext_vector_type(4)));

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_i8(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i8(i8 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_i8(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i8(i8 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_i8(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i8(i8 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_i8(char vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_i8(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_i16(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i16(i16 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_i16(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i16(i16 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_i16(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i16(i16 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_i16(short vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_i16(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_i32(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i32(i32 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_i32(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i32(i32 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_i32(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.i32(i32 [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_i32(int vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_i32(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_f16(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.f16(half [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_f16(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.f16(half [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_f16(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.f16(half [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_f16(half vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_f16(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_f32(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.f32(float [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_f32(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.f32(float [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_f32(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.f32(float [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_f32(float vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_f32(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v2i16(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2i16(<2 x i16> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v2i16(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2i16(<2 x i16> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v2i16(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2i16(<2 x i16> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v2i16(v2i16 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v2i16(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v2i32(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2i32(<2 x i32> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v2i32(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2i32(<2 x i32> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v2i32(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2i32(<2 x i32> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v2i32(v2i32 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v2i32(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v2f16(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2f16(<2 x half> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v2f16(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2f16(<2 x half> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v2f16(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2f16(<2 x half> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v2f16(v2f16 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v2f16(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v2f32(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2f32(<2 x float> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v2f32(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2f32(<2 x float> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v2f32(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v2f32(<2 x float> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v2f32(v2f32 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v2f32(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v4i16(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4i16(<4 x i16> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v4i16(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4i16(<4 x i16> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v4i16(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4i16(<4 x i16> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v4i16(v4i16 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v4i16(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v4i32(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4i32(<4 x i32> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v4i32(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4i32(<4 x i32> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v4i32(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4i32(<4 x i32> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v4i32(v4i32 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v4i32(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v4f16(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4f16(<4 x half> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v4f16(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4f16(<4 x half> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v4f16(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4f16(<4 x half> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v4f16(v4f16 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v4f16(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}

// VERDE-LABEL: @test_amdgcn_raw_buffer_store_v4f32(
// VERDE-NEXT:  entry:
// VERDE-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4f32(<4 x float> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// VERDE-NEXT:    ret void
//
// GFX8-LABEL: @test_amdgcn_raw_buffer_store_v4f32(
// GFX8-NEXT:  entry:
// GFX8-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4f32(<4 x float> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX8-NEXT:    ret void
//
// GFX11-LABEL: @test_amdgcn_raw_buffer_store_v4f32(
// GFX11-NEXT:  entry:
// GFX11-NEXT:    tail call void @llvm.amdgcn.raw.buffer.store.v4f32(<4 x float> [[VDATA:%.*]], <4 x i32> [[RSRC:%.*]], i32 0, i32 0, i32 0)
// GFX11-NEXT:    ret void
//
void test_amdgcn_raw_buffer_store_v4f32(v4f32 vdata, v4i32 rsrc) {
  __builtin_amdgcn_raw_buffer_store_v4f32(vdata, rsrc, /*offset=*/0, /*soffset=*/0, /*aux=*/0);
}


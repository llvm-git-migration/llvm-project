; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -disable-verify -verify-analysis-invalidation=0 -eagerly-invalidate-analyses=0 -debug-pass-manager \
; RUN:     -passes='default<O3>' -S %s 2>&1 | FileCheck %s

define <4 x float> @multiply_2x2(<4 x float> %a, <4 x float> %b) {
; CHECK:      Running pass: LowerMatrixIntrinsicsPass
; CHECK-NEXT: Running analysis: ShouldRunExtraPasses
; CHECK-NEXT: Invalidating analysis: PostDominatorTreeAnalysis
; CHECK-NEXT: Running pass: EarlyCSEPass
; CHECK-NEXT: Invalidating analysis: ShouldRunExtraPasses
;
entry:
  %c = call <4 x float> @llvm.matrix.multiply.v4f32.v4f32.v4f32(<4 x float> %a, <4 x float> %b, i32 2, i32 2, i32 2)
  ret <4 x float> %c
}

declare <4 x float> @llvm.matrix.multiply.v4f32.v4f32.v4f32(<4 x float>, <4 x float>, i32, i32, i32)

# RUN: llc -mtriple=amdgcn -run-pass=none -o - %s | FileCheck %s
# This test ensures that the MIR parser parses virtual register flags correctly

---
name: vregs
# CHECK: registers:
# CHECK-NEXT:   - { id: 0, class: vgpr_32, preferred-register: '$vgpr1', flags: [ WWM_REG ] }
# CHECK-NEXT:   - { id: 1, class: sgpr_64, preferred-register: '$sgpr0_sgpr1', flags: [  ] }
# CHECK-NEXT:   - { id: 2, class: sgpr_64, preferred-register: '', flags: [  ] }
registers:
  - { id: 0, class: vgpr_32, preferred-register: $vgpr1, flags: [ WWM_REG ]}
  - { id: 1, class: sgpr_64, preferred-register: $sgpr0_sgpr1 }
body: |
  bb.0:
    %2:sgpr_64 = COPY %1
    %1:sgpr_64 = COPY %0

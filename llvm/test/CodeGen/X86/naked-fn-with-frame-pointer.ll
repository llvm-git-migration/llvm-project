; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -mtriple i386 | FileCheck %s -check-prefixes=NAKED-32
; RUN: llc < %s -mtriple x86_64 | FileCheck %s -check-prefixes=NAKED-64

declare dso_local void @main()

define dso_local void @naked() naked "frame-pointer"="all" {
; NAKED-32-LABEL: naked:
; NAKED-32:       # %bb.0:
; NAKED-32-NEXT:    calll main
;
; NAKED-64-LABEL: naked:
; NAKED-64:       # %bb.0:
; NAKED-64-NEXT:    callq main
  call void @main()
  unreachable
}

define dso_local void @normal() "frame-pointer"="all" {
; NAKED-32-LABEL: normal:
; NAKED-32:       # %bb.0:
; NAKED-32-NEXT:    pushl %ebp
; NAKED-32-NEXT:    .cfi_def_cfa_offset 8
; NAKED-32-NEXT:    .cfi_offset %ebp, -8
; NAKED-32-NEXT:    movl %esp, %ebp
; NAKED-32-NEXT:    .cfi_def_cfa_register %ebp
; NAKED-32-NEXT:    calll main
;
; NAKED-64-LABEL: normal:
; NAKED-64:       # %bb.0:
; NAKED-64-NEXT:    pushq %rbp
; NAKED-64-NEXT:    .cfi_def_cfa_offset 16
; NAKED-64-NEXT:    .cfi_offset %rbp, -16
; NAKED-64-NEXT:    movq %rsp, %rbp
; NAKED-64-NEXT:    .cfi_def_cfa_register %rbp
; NAKED-64-NEXT:    callq main
  call void @main()
  unreachable
}

; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -march xtensa | FileCheck %s -check-prefixes=NAKED

declare dso_local void @main()

define dso_local void @naked() naked "frame-pointer"="all" {
; NAKED-LABEL: naked:
; NAKED:       # %bb.0:
; NAKED-NEXT:    l32r a8, {{\.?LCPI[0-9]+_[0-9]+}}
; NAKED-NEXT:    callx0 a8
  call void @main()
  unreachable
}

define dso_local void @normal() "frame-pointer"="all" {
; NAKED-LABEL: normal:
; NAKED:       # %bb.0:
; NAKED-NEXT:    addi a8, a1, -16
; NAKED-NEXT:    or a1, a8, a8
; NAKED-NEXT:    .cfi_def_cfa_offset 16
; NAKED-NEXT:    s32i a0, a1, 4 # 4-byte Folded Spill
; NAKED-NEXT:    s32i a15, a1, 0 # 4-byte Folded Spill
; NAKED-NEXT:    .cfi_offset a0, -4
; NAKED-NEXT:    .cfi_offset a15, -8
; NAKED-NEXT:    or a15, a1, a1
; NAKED-NEXT:    .cfi_def_cfa_register a15
; NAKED-NEXT:    l32r a8, {{\.?LCPI[0-9]+_[0-9]+}}
; NAKED-NEXT:    callx0 a8
  call void @main()
  unreachable
}

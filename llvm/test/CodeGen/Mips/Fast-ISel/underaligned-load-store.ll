; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -march mips -fast-isel -relocation-model pic | FileCheck %s -check-prefixes=MIPS

@var = external global i32, align 1

; FastISel should bail on the underaligned load and store.
define dso_local ccc i32 @__start() {
; MIPS-LABEL: __start:
; MIPS:       # %bb.0:
; MIPS-NEXT:    lui $2, %hi(_gp_disp)
; MIPS-NEXT:    addiu $2, $2, %lo(_gp_disp)
; MIPS-NEXT:    addu $1, $2, $25
; MIPS-NEXT:    lw $1, %got(var)($1)
; MIPS-NEXT:    lwl $2, 0($1)
; MIPS-NEXT:    lwr $2, 3($1)
; MIPS-NEXT:    addiu $3, $zero, 42
; MIPS-NEXT:    swl $3, 0($1)
; MIPS-NEXT:    jr $ra
; MIPS-NEXT:    swr $3, 3($1)
    %1 = load i32, ptr @var, align 1
    store i32 42, ptr @var, align 1
    ret i32 %1
}

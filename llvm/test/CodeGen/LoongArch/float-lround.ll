; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc --mtriple=loongarch64 --mattr=-f,-d %s -o - \
; RUN:   | FileCheck -check-prefix=LA64S %s

declare i32 @llvm.lround.i32.f32(float)

; We support lround with i32 as return type on LoongArch64. This is needed by flang.
define i32 @lround_i32_f32(float %a) nounwind {
; LA64S-LABEL: lround_i32_f32:
; LA64S:       # %bb.0:
; LA64S-NEXT:    addi.d $sp, $sp, -16
; LA64S-NEXT:    st.d $ra, $sp, 8 # 8-byte Folded Spill
; LA64S-NEXT:    bl %plt(lroundf)
; LA64S-NEXT:    ld.d $ra, $sp, 8 # 8-byte Folded Reload
; LA64S-NEXT:    addi.d $sp, $sp, 16
; LA64S-NEXT:    ret

  %1 = call i32 @llvm.lround.i32.f32(float %a)
  ret i32 %1
}

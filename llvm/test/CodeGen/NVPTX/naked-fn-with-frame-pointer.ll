; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -mtriple nvptx | FileCheck %s -check-prefixes=NAKED-32
; RUN: llc < %s -mtriple nvptx64 | FileCheck %s -check-prefixes=NAKED-64

declare dso_local void @main()

define dso_local void @naked() naked "frame-pointer"="all" {
; NAKED-32-LABEL: naked(
; NAKED-32:       {
; NAKED-32-EMPTY:
; NAKED-32-EMPTY:
; NAKED-32-NEXT:  // %bb.0:
; NAKED-32-NEXT:    { // callseq 0, 0
; NAKED-32-NEXT:    call.uni
; NAKED-32-NEXT:    main,
; NAKED-32-NEXT:    (
; NAKED-32-NEXT:    );
; NAKED-32-NEXT:    } // callseq 0
; NAKED-32-NEXT:    // begin inline asm
; NAKED-32-NEXT:    exit;
; NAKED-32-NEXT:    // end inline asm
;
; NAKED-64-LABEL: naked(
; NAKED-64:       {
; NAKED-64-EMPTY:
; NAKED-64-EMPTY:
; NAKED-64-NEXT:  // %bb.0:
; NAKED-64-NEXT:    { // callseq 0, 0
; NAKED-64-NEXT:    call.uni
; NAKED-64-NEXT:    main,
; NAKED-64-NEXT:    (
; NAKED-64-NEXT:    );
; NAKED-64-NEXT:    } // callseq 0
; NAKED-64-NEXT:    // begin inline asm
; NAKED-64-NEXT:    exit;
; NAKED-64-NEXT:    // end inline asm
  call void @main()
  unreachable
}

define dso_local void @normal() "frame-pointer"="all" {
; NAKED-32-LABEL: normal(
; NAKED-32:       {
; NAKED-32-EMPTY:
; NAKED-32-EMPTY:
; NAKED-32-NEXT:  // %bb.0:
; NAKED-32-NEXT:    { // callseq 1, 0
; NAKED-32-NEXT:    call.uni
; NAKED-32-NEXT:    main,
; NAKED-32-NEXT:    (
; NAKED-32-NEXT:    );
; NAKED-32-NEXT:    } // callseq 1
; NAKED-32-NEXT:    // begin inline asm
; NAKED-32-NEXT:    exit;
; NAKED-32-NEXT:    // end inline asm
;
; NAKED-64-LABEL: normal(
; NAKED-64:       {
; NAKED-64-EMPTY:
; NAKED-64-EMPTY:
; NAKED-64-NEXT:  // %bb.0:
; NAKED-64-NEXT:    { // callseq 1, 0
; NAKED-64-NEXT:    call.uni
; NAKED-64-NEXT:    main,
; NAKED-64-NEXT:    (
; NAKED-64-NEXT:    );
; NAKED-64-NEXT:    } // callseq 1
; NAKED-64-NEXT:    // begin inline asm
; NAKED-64-NEXT:    exit;
; NAKED-64-NEXT:    // end inline asm
  call void @main()
  unreachable
}

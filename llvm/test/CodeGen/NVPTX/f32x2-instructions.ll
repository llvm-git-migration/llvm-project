; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; ## Full FP32x2 support enabled by default.
; RUN: llc < %s -mtriple=nvptx64-nvidia-cuda -mcpu=sm_100                    \
; RUN:         -O0 -disable-post-ra -frame-pointer=all -verify-machineinstrs \
; RUN: | FileCheck --check-prefixes=CHECK %s
; RUN: %if ptxas %{                                                            \
; RUN:  llc < %s -mtriple=nvptx64-nvidia-cuda -mcpu=sm_100                     \
; RUN:           -O0 -disable-post-ra -frame-pointer=all -verify-machineinstrs \
; RUN:  | %ptxas-verify -arch=sm_100                                           \
; RUN: %}

target datalayout = "e-m:o-i64:64-i128:128-n32:64-S128"
target triple = "nvptx64-nvidia-cuda"

define <2 x float> @test_ret_const() #0 {
; CHECK-LABEL: test_ret_const(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    mov.f32 %f1, 0f40000000;
; CHECK-NEXT:    mov.f32 %f2, 0f3F800000;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f1};
; CHECK-NEXT:    ret;
  ret <2 x float> <float 1.0, float 2.0>
}

define float @test_extract_0(<2 x float> %a) #0 {
; CHECK-LABEL: test_extract_0(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<2>;
; CHECK-NEXT:    .reg .b64 %rd<2>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_extract_0_param_0];
; CHECK-NEXT:    { .reg .b32 tmp; mov.b64 {%f1, tmp}, %rd1; }
; CHECK-NEXT:    st.param.f32 [func_retval0], %f1;
; CHECK-NEXT:    ret;
  %e = extractelement <2 x float> %a, i32 0
  ret float %e
}

define float @test_extract_1(<2 x float> %a) #0 {
; CHECK-LABEL: test_extract_1(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<2>;
; CHECK-NEXT:    .reg .b64 %rd<2>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_extract_1_param_0];
; CHECK-NEXT:    { .reg .b32 tmp; mov.b64 {tmp, %f1}, %rd1; }
; CHECK-NEXT:    st.param.f32 [func_retval0], %f1;
; CHECK-NEXT:    ret;
  %e = extractelement <2 x float> %a, i32 1
  ret float %e
}

define float @test_extract_i(<2 x float> %a, i64 %idx) #0 {
; CHECK-LABEL: test_extract_i(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<2>;
; CHECK-NEXT:    .reg .f32 %f<4>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_extract_i_param_0];
; CHECK-NEXT:    ld.param.u64 %rd2, [test_extract_i_param_1];
; CHECK-NEXT:    setp.eq.s64 %p1, %rd2, 0;
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd1;
; CHECK-NEXT:    selp.f32 %f3, %f1, %f2, %p1;
; CHECK-NEXT:    st.param.f32 [func_retval0], %f3;
; CHECK-NEXT:    ret;
  %e = extractelement <2 x float> %a, i64 %idx
  ret float %e
}

define <2 x float> @test_fadd(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fadd(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fadd_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fadd_param_1];
; CHECK-NEXT:    add.rn.f32x2 %rd3, %rd1, %rd2;
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f1, %f2};
; CHECK-NEXT:    ret;
  %r = fadd <2 x float> %a, %b
  ret <2 x float> %r
}

define <2 x float> @test_fadd_imm_0(<2 x float> %a) #0 {
; CHECK-LABEL: test_fadd_imm_0(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fadd_imm_0_param_0];
; CHECK-NEXT:    mov.f32 %f1, 0f40000000;
; CHECK-NEXT:    mov.f32 %f2, 0f3F800000;
; CHECK-NEXT:    mov.b64 %rd2, {%f2, %f1};
; CHECK-NEXT:    add.rn.f32x2 %rd3, %rd1, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f3, %f4};
; CHECK-NEXT:    ret;
  %r = fadd <2 x float> <float 1.0, float 2.0>, %a
  ret <2 x float> %r
}

define <2 x float> @test_fadd_imm_1(<2 x float> %a) #0 {
; CHECK-LABEL: test_fadd_imm_1(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fadd_imm_1_param_0];
; CHECK-NEXT:    mov.f32 %f1, 0f40000000;
; CHECK-NEXT:    mov.f32 %f2, 0f3F800000;
; CHECK-NEXT:    mov.b64 %rd2, {%f2, %f1};
; CHECK-NEXT:    add.rn.f32x2 %rd3, %rd1, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f3, %f4};
; CHECK-NEXT:    ret;
  %r = fadd <2 x float> %a, <float 1.0, float 2.0>
  ret <2 x float> %r
}

define <4 x float> @test_fadd_v4(<4 x float> %a, <4 x float> %b) #0 {
; CHECK-LABEL: test_fadd_v4(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<13>;
; CHECK-NEXT:    .reg .b64 %rd<7>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v4.f32 {%f1, %f2, %f3, %f4}, [test_fadd_v4_param_0];
; CHECK-NEXT:    mov.b64 %rd2, {%f3, %f4};
; CHECK-NEXT:    mov.b64 %rd1, {%f1, %f2};
; CHECK-NEXT:    ld.param.v4.f32 {%f5, %f6, %f7, %f8}, [test_fadd_v4_param_1];
; CHECK-NEXT:    mov.b64 %rd4, {%f7, %f8};
; CHECK-NEXT:    mov.b64 %rd3, {%f5, %f6};
; CHECK-NEXT:    add.rn.f32x2 %rd5, %rd1, %rd3;
; CHECK-NEXT:    add.rn.f32x2 %rd6, %rd2, %rd4;
; CHECK-NEXT:    mov.b64 {%f9, %f10}, %rd6;
; CHECK-NEXT:    mov.b64 {%f11, %f12}, %rd5;
; CHECK-NEXT:    st.param.v4.f32 [func_retval0], {%f11, %f12, %f9, %f10};
; CHECK-NEXT:    ret;
  %r = fadd <4 x float> %a, %b
  ret <4 x float> %r
}

define <4 x float> @test_fadd_imm_0_v4(<4 x float> %a) #0 {
; CHECK-LABEL: test_fadd_imm_0_v4(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<13>;
; CHECK-NEXT:    .reg .b64 %rd<7>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v4.f32 {%f1, %f2, %f3, %f4}, [test_fadd_imm_0_v4_param_0];
; CHECK-NEXT:    mov.b64 %rd2, {%f3, %f4};
; CHECK-NEXT:    mov.b64 %rd1, {%f1, %f2};
; CHECK-NEXT:    mov.f32 %f5, 0f40000000;
; CHECK-NEXT:    mov.f32 %f6, 0f3F800000;
; CHECK-NEXT:    mov.b64 %rd3, {%f6, %f5};
; CHECK-NEXT:    add.rn.f32x2 %rd4, %rd1, %rd3;
; CHECK-NEXT:    mov.f32 %f7, 0f40800000;
; CHECK-NEXT:    mov.f32 %f8, 0f40400000;
; CHECK-NEXT:    mov.b64 %rd5, {%f8, %f7};
; CHECK-NEXT:    add.rn.f32x2 %rd6, %rd2, %rd5;
; CHECK-NEXT:    mov.b64 {%f9, %f10}, %rd6;
; CHECK-NEXT:    mov.b64 {%f11, %f12}, %rd4;
; CHECK-NEXT:    st.param.v4.f32 [func_retval0], {%f11, %f12, %f9, %f10};
; CHECK-NEXT:    ret;
  %r = fadd <4 x float> <float 1.0, float 2.0, float 3.0, float 4.0>, %a
  ret <4 x float> %r
}

define <4 x float> @test_fadd_imm_1_v4(<4 x float> %a) #0 {
; CHECK-LABEL: test_fadd_imm_1_v4(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<13>;
; CHECK-NEXT:    .reg .b64 %rd<7>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v4.f32 {%f1, %f2, %f3, %f4}, [test_fadd_imm_1_v4_param_0];
; CHECK-NEXT:    mov.b64 %rd2, {%f3, %f4};
; CHECK-NEXT:    mov.b64 %rd1, {%f1, %f2};
; CHECK-NEXT:    mov.f32 %f5, 0f40000000;
; CHECK-NEXT:    mov.f32 %f6, 0f3F800000;
; CHECK-NEXT:    mov.b64 %rd3, {%f6, %f5};
; CHECK-NEXT:    add.rn.f32x2 %rd4, %rd1, %rd3;
; CHECK-NEXT:    mov.f32 %f7, 0f40800000;
; CHECK-NEXT:    mov.f32 %f8, 0f40400000;
; CHECK-NEXT:    mov.b64 %rd5, {%f8, %f7};
; CHECK-NEXT:    add.rn.f32x2 %rd6, %rd2, %rd5;
; CHECK-NEXT:    mov.b64 {%f9, %f10}, %rd6;
; CHECK-NEXT:    mov.b64 {%f11, %f12}, %rd4;
; CHECK-NEXT:    st.param.v4.f32 [func_retval0], {%f11, %f12, %f9, %f10};
; CHECK-NEXT:    ret;
  %r = fadd <4 x float> %a, <float 1.0, float 2.0, float 3.0, float 4.0>
  ret <4 x float> %r
}

define <2 x float> @test_fsub(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fsub(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fsub_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fsub_param_1];
; CHECK-NEXT:    sub.rn.f32x2 %rd3, %rd1, %rd2;
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f1, %f2};
; CHECK-NEXT:    ret;
  %r = fsub <2 x float> %a, %b
  ret <2 x float> %r
}

define <2 x float> @test_fneg(<2 x float> %a) #0 {
; CHECK-LABEL: test_fneg(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<4>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fneg_param_0];
; CHECK-NEXT:    mov.f32 %f1, 0f00000000;
; CHECK-NEXT:    mov.b64 %rd2, {%f1, %f1};
; CHECK-NEXT:    sub.rn.f32x2 %rd3, %rd2, %rd1;
; CHECK-NEXT:    mov.b64 {%f2, %f3}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f3};
; CHECK-NEXT:    ret;
  %r = fsub <2 x float> <float 0.0, float 0.0>, %a
  ret <2 x float> %r
}

define <2 x float> @test_fmul(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fmul(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fmul_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fmul_param_1];
; CHECK-NEXT:    mul.rn.f32x2 %rd3, %rd1, %rd2;
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f1, %f2};
; CHECK-NEXT:    ret;
  %r = fmul <2 x float> %a, %b
  ret <2 x float> %r
}

define <2 x float> @test_fdiv(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fdiv(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<7>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fdiv_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fdiv_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    div.rn.f32 %f5, %f4, %f2;
; CHECK-NEXT:    div.rn.f32 %f6, %f3, %f1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f6, %f5};
; CHECK-NEXT:    ret;
  %r = fdiv <2 x float> %a, %b
  ret <2 x float> %r
}

define <2 x float> @test_frem(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_frem(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .f32 %f<15>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_frem_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_frem_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    div.rn.f32 %f5, %f4, %f2;
; CHECK-NEXT:    cvt.rzi.f32.f32 %f6, %f5;
; CHECK-NEXT:    mul.f32 %f7, %f6, %f2;
; CHECK-NEXT:    sub.f32 %f8, %f4, %f7;
; CHECK-NEXT:    testp.infinite.f32 %p1, %f2;
; CHECK-NEXT:    selp.f32 %f9, %f4, %f8, %p1;
; CHECK-NEXT:    div.rn.f32 %f10, %f3, %f1;
; CHECK-NEXT:    cvt.rzi.f32.f32 %f11, %f10;
; CHECK-NEXT:    mul.f32 %f12, %f11, %f1;
; CHECK-NEXT:    sub.f32 %f13, %f3, %f12;
; CHECK-NEXT:    testp.infinite.f32 %p2, %f1;
; CHECK-NEXT:    selp.f32 %f14, %f3, %f13, %p2;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f14, %f9};
; CHECK-NEXT:    ret;
  %r = frem <2 x float> %a, %b
  ret <2 x float> %r
}

define void @test_ldst_v2f32(ptr %a, ptr %b) #0 {
; CHECK-LABEL: test_ldst_v2f32(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.u64 %rd1, [test_ldst_v2f32_param_0];
; CHECK-NEXT:    ld.param.u64 %rd2, [test_ldst_v2f32_param_1];
; CHECK-NEXT:    ld.b64 %rd3, [%rd1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd3;
; CHECK-NEXT:    st.v2.f32 [%rd2], {%f1, %f2};
; CHECK-NEXT:    ret;
  %t1 = load <2 x float>, ptr %a
  store <2 x float> %t1, ptr %b, align 32
  ret void
}

define void @test_ldst_v3f32(ptr %a, ptr %b) #0 {
; CHECK-LABEL: test_ldst_v3f32(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<2>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.u64 %rd1, [test_ldst_v3f32_param_0];
; CHECK-NEXT:    ld.param.u64 %rd2, [test_ldst_v3f32_param_1];
; CHECK-NEXT:    ld.u64 %rd3, [%rd1];
; CHECK-NEXT:    ld.f32 %f1, [%rd1+8];
; CHECK-NEXT:    st.f32 [%rd2+8], %f1;
; CHECK-NEXT:    st.u64 [%rd2], %rd3;
; CHECK-NEXT:    ret;
  %t1 = load <3 x float>, ptr %a
  store <3 x float> %t1, ptr %b, align 32
  ret void
}

define void @test_ldst_v4f32(ptr %a, ptr %b) #0 {
; CHECK-LABEL: test_ldst_v4f32(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.u64 %rd1, [test_ldst_v4f32_param_0];
; CHECK-NEXT:    ld.param.u64 %rd2, [test_ldst_v4f32_param_1];
; CHECK-NEXT:    ld.v4.f32 {%f1, %f2, %f3, %f4}, [%rd1];
; CHECK-NEXT:    st.v4.f32 [%rd2], {%f1, %f2, %f3, %f4};
; CHECK-NEXT:    ret;
  %t1 = load <4 x float>, ptr %a
  store <4 x float> %t1, ptr %b, align 32
  ret void
}

define void @test_ldst_v8f32(ptr %a, ptr %b) #0 {
; CHECK-LABEL: test_ldst_v8f32(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<9>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.u64 %rd1, [test_ldst_v8f32_param_0];
; CHECK-NEXT:    ld.param.u64 %rd2, [test_ldst_v8f32_param_1];
; CHECK-NEXT:    ld.v4.f32 {%f1, %f2, %f3, %f4}, [%rd1];
; CHECK-NEXT:    ld.v4.f32 {%f5, %f6, %f7, %f8}, [%rd1+16];
; CHECK-NEXT:    st.v4.f32 [%rd2+16], {%f5, %f6, %f7, %f8};
; CHECK-NEXT:    st.v4.f32 [%rd2], {%f1, %f2, %f3, %f4};
; CHECK-NEXT:    ret;
  %t1 = load <8 x float>, ptr %a
  store <8 x float> %t1, ptr %b, align 32
  ret void
}

declare <2 x float> @test_callee(<2 x float> %a, <2 x float> %b) #0

define <2 x float> @test_call(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_call(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<9>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_call_param_0];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd1;
; CHECK-NEXT:    ld.param.b64 %rd2, [test_call_param_1];
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd2;
; CHECK-NEXT:    { // callseq 0, 0
; CHECK-NEXT:    .param .align 8 .b8 param0[8];
; CHECK-NEXT:    st.param.v2.f32 [param0], {%f1, %f2};
; CHECK-NEXT:    .param .align 8 .b8 param1[8];
; CHECK-NEXT:    st.param.v2.f32 [param1], {%f3, %f4};
; CHECK-NEXT:    .param .align 8 .b8 retval0[8];
; CHECK-NEXT:    call.uni (retval0),
; CHECK-NEXT:    test_callee,
; CHECK-NEXT:    (
; CHECK-NEXT:    param0,
; CHECK-NEXT:    param1
; CHECK-NEXT:    );
; CHECK-NEXT:    ld.param.v2.f32 {%f5, %f6}, [retval0];
; CHECK-NEXT:    } // callseq 0
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f5, %f6};
; CHECK-NEXT:    ret;
  %r = call <2 x float> @test_callee(<2 x float> %a, <2 x float> %b)
  ret <2 x float> %r
}

define <2 x float> @test_call_flipped(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_call_flipped(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<9>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd2, [test_call_flipped_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    ld.param.b64 %rd1, [test_call_flipped_param_0];
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    { // callseq 1, 0
; CHECK-NEXT:    .param .align 8 .b8 param0[8];
; CHECK-NEXT:    st.param.v2.f32 [param0], {%f1, %f2};
; CHECK-NEXT:    .param .align 8 .b8 param1[8];
; CHECK-NEXT:    st.param.v2.f32 [param1], {%f3, %f4};
; CHECK-NEXT:    .param .align 8 .b8 retval0[8];
; CHECK-NEXT:    call.uni (retval0),
; CHECK-NEXT:    test_callee,
; CHECK-NEXT:    (
; CHECK-NEXT:    param0,
; CHECK-NEXT:    param1
; CHECK-NEXT:    );
; CHECK-NEXT:    ld.param.v2.f32 {%f5, %f6}, [retval0];
; CHECK-NEXT:    } // callseq 1
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f5, %f6};
; CHECK-NEXT:    ret;
  %r = call <2 x float> @test_callee(<2 x float> %b, <2 x float> %a)
  ret <2 x float> %r
}

define <2 x float> @test_tailcall_flipped(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_tailcall_flipped(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<9>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd2, [test_tailcall_flipped_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    ld.param.b64 %rd1, [test_tailcall_flipped_param_0];
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    { // callseq 2, 0
; CHECK-NEXT:    .param .align 8 .b8 param0[8];
; CHECK-NEXT:    st.param.v2.f32 [param0], {%f1, %f2};
; CHECK-NEXT:    .param .align 8 .b8 param1[8];
; CHECK-NEXT:    st.param.v2.f32 [param1], {%f3, %f4};
; CHECK-NEXT:    .param .align 8 .b8 retval0[8];
; CHECK-NEXT:    call.uni (retval0),
; CHECK-NEXT:    test_callee,
; CHECK-NEXT:    (
; CHECK-NEXT:    param0,
; CHECK-NEXT:    param1
; CHECK-NEXT:    );
; CHECK-NEXT:    ld.param.v2.f32 {%f5, %f6}, [retval0];
; CHECK-NEXT:    } // callseq 2
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f5, %f6};
; CHECK-NEXT:    ret;
  %r = tail call <2 x float> @test_callee(<2 x float> %b, <2 x float> %a)
  ret <2 x float> %r
}

define <2 x float> @test_select(<2 x float> %a, <2 x float> %b, i1 zeroext %c) #0 {
; CHECK-LABEL: test_select(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<2>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_select_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_select_param_1];
; CHECK-NEXT:    ld.param.u8 %rs1, [test_select_param_2];
; CHECK-NEXT:    and.b16 %rs2, %rs1, 1;
; CHECK-NEXT:    setp.eq.b16 %p1, %rs2, 1;
; CHECK-NEXT:    selp.b64 %rd3, %rd1, %rd2, %p1;
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f1, %f2};
; CHECK-NEXT:    ret;
  %r = select i1 %c, <2 x float> %a, <2 x float> %b
  ret <2 x float> %r
}

define <2 x float> @test_select_cc(<2 x float> %a, <2 x float> %b, <2 x float> %c, <2 x float> %d) #0 {
; CHECK-LABEL: test_select_cc(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .f32 %f<11>;
; CHECK-NEXT:    .reg .b64 %rd<5>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_select_cc_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_select_cc_param_1];
; CHECK-NEXT:    ld.param.b64 %rd3, [test_select_cc_param_2];
; CHECK-NEXT:    ld.param.b64 %rd4, [test_select_cc_param_3];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd4;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd3;
; CHECK-NEXT:    setp.neu.f32 %p1, %f3, %f1;
; CHECK-NEXT:    setp.neu.f32 %p2, %f4, %f2;
; CHECK-NEXT:    mov.b64 {%f5, %f6}, %rd2;
; CHECK-NEXT:    mov.b64 {%f7, %f8}, %rd1;
; CHECK-NEXT:    selp.f32 %f9, %f8, %f6, %p2;
; CHECK-NEXT:    selp.f32 %f10, %f7, %f5, %p1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f10, %f9};
; CHECK-NEXT:    ret;
  %cc = fcmp une <2 x float> %c, %d
  %r = select <2 x i1> %cc, <2 x float> %a, <2 x float> %b
  ret <2 x float> %r
}

define <2 x double> @test_select_cc_f64_f32(<2 x double> %a, <2 x double> %b, <2 x float> %c, <2 x float> %d) #0 {
; CHECK-LABEL: test_select_cc_f64_f32(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-NEXT:    .reg .f64 %fd<7>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.f64 {%fd1, %fd2}, [test_select_cc_f64_f32_param_0];
; CHECK-NEXT:    ld.param.v2.f64 {%fd3, %fd4}, [test_select_cc_f64_f32_param_1];
; CHECK-NEXT:    ld.param.b64 %rd1, [test_select_cc_f64_f32_param_2];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_select_cc_f64_f32_param_3];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.neu.f32 %p1, %f3, %f1;
; CHECK-NEXT:    setp.neu.f32 %p2, %f4, %f2;
; CHECK-NEXT:    selp.f64 %fd5, %fd2, %fd4, %p2;
; CHECK-NEXT:    selp.f64 %fd6, %fd1, %fd3, %p1;
; CHECK-NEXT:    st.param.v2.f64 [func_retval0], {%fd6, %fd5};
; CHECK-NEXT:    ret;
  %cc = fcmp une <2 x float> %c, %d
  %r = select <2 x i1> %cc, <2 x double> %a, <2 x double> %b
  ret <2 x double> %r
}

define <2 x float> @test_select_cc_f32_f64(<2 x float> %a, <2 x float> %b, <2 x double> %c, <2 x double> %d) #0 {
; CHECK-LABEL: test_select_cc_f32_f64(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .f32 %f<7>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-NEXT:    .reg .f64 %fd<5>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_select_cc_f32_f64_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_select_cc_f32_f64_param_1];
; CHECK-NEXT:    ld.param.v2.f64 {%fd1, %fd2}, [test_select_cc_f32_f64_param_2];
; CHECK-NEXT:    ld.param.v2.f64 {%fd3, %fd4}, [test_select_cc_f32_f64_param_3];
; CHECK-NEXT:    setp.neu.f64 %p1, %fd1, %fd3;
; CHECK-NEXT:    setp.neu.f64 %p2, %fd2, %fd4;
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    selp.f32 %f5, %f4, %f2, %p2;
; CHECK-NEXT:    selp.f32 %f6, %f3, %f1, %p1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f6, %f5};
; CHECK-NEXT:    ret;
  %cc = fcmp une <2 x double> %c, %d
  %r = select <2 x i1> %cc, <2 x float> %a, <2 x float> %b
  ret <2 x float> %r
}

define <2 x i1> @test_fcmp_une(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_une(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_une_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_une_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.neu.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.neu.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp une <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ueq(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ueq(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ueq_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ueq_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.equ.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.equ.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ueq <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ugt(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ugt(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ugt_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ugt_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.gtu.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.gtu.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ugt <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_uge(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_uge(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_uge_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_uge_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.geu.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.geu.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp uge <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ult(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ult(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ult_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ult_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.ltu.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.ltu.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ult <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ule(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ule(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ule_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ule_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.leu.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.leu.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ule <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_uno(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_uno(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_uno_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_uno_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.nan.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.nan.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp uno <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_one(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_one(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_one_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_one_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.ne.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.ne.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp one <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_oeq(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_oeq(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_oeq_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_oeq_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.eq.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.eq.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp oeq <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ogt(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ogt(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ogt_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ogt_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.gt.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.gt.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ogt <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_oge(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_oge(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_oge_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_oge_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.ge.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.ge.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp oge <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_olt(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_olt(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_olt_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_olt_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.lt.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.lt.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp olt <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ole(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ole(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ole_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ole_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.le.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.le.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ole <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i1> @test_fcmp_ord(<2 x float> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_fcmp_ord(
; CHECK:       {
; CHECK-NEXT:    .reg .pred %p<3>;
; CHECK-NEXT:    .reg .b16 %rs<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fcmp_ord_param_0];
; CHECK-NEXT:    ld.param.b64 %rd2, [test_fcmp_ord_param_1];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd1;
; CHECK-NEXT:    setp.num.f32 %p1, %f4, %f2;
; CHECK-NEXT:    setp.num.f32 %p2, %f3, %f1;
; CHECK-NEXT:    selp.u16 %rs1, -1, 0, %p2;
; CHECK-NEXT:    st.param.b8 [func_retval0], %rs1;
; CHECK-NEXT:    selp.u16 %rs2, -1, 0, %p1;
; CHECK-NEXT:    st.param.b8 [func_retval0+1], %rs2;
; CHECK-NEXT:    ret;
  %r = fcmp ord <2 x float> %a, %b
  ret <2 x i1> %r
}

define <2 x i32> @test_fptosi_i32(<2 x float> %a) #0 {
; CHECK-LABEL: test_fptosi_i32(
; CHECK:       {
; CHECK-NEXT:    .reg .b32 %r<3>;
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<2>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fptosi_i32_param_0];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd1;
; CHECK-NEXT:    cvt.rzi.s32.f32 %r1, %f2;
; CHECK-NEXT:    cvt.rzi.s32.f32 %r2, %f1;
; CHECK-NEXT:    st.param.v2.b32 [func_retval0], {%r2, %r1};
; CHECK-NEXT:    ret;
  %r = fptosi <2 x float> %a to <2 x i32>
  ret <2 x i32> %r
}

define <2 x i64> @test_fptosi_i64(<2 x float> %a) #0 {
; CHECK-LABEL: test_fptosi_i64(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fptosi_i64_param_0];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd1;
; CHECK-NEXT:    cvt.rzi.s64.f32 %rd2, %f2;
; CHECK-NEXT:    cvt.rzi.s64.f32 %rd3, %f1;
; CHECK-NEXT:    st.param.v2.b64 [func_retval0], {%rd3, %rd2};
; CHECK-NEXT:    ret;
  %r = fptosi <2 x float> %a to <2 x i64>
  ret <2 x i64> %r
}

define <2 x i32> @test_fptoui_2xi32(<2 x float> %a) #0 {
; CHECK-LABEL: test_fptoui_2xi32(
; CHECK:       {
; CHECK-NEXT:    .reg .b32 %r<3>;
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<2>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fptoui_2xi32_param_0];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd1;
; CHECK-NEXT:    cvt.rzi.u32.f32 %r1, %f2;
; CHECK-NEXT:    cvt.rzi.u32.f32 %r2, %f1;
; CHECK-NEXT:    st.param.v2.b32 [func_retval0], {%r2, %r1};
; CHECK-NEXT:    ret;
  %r = fptoui <2 x float> %a to <2 x i32>
  ret <2 x i32> %r
}

define <2 x i64> @test_fptoui_2xi64(<2 x float> %a) #0 {
; CHECK-LABEL: test_fptoui_2xi64(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.b64 %rd1, [test_fptoui_2xi64_param_0];
; CHECK-NEXT:    mov.b64 {%f1, %f2}, %rd1;
; CHECK-NEXT:    cvt.rzi.u64.f32 %rd2, %f2;
; CHECK-NEXT:    cvt.rzi.u64.f32 %rd3, %f1;
; CHECK-NEXT:    st.param.v2.b64 [func_retval0], {%rd3, %rd2};
; CHECK-NEXT:    ret;
  %r = fptoui <2 x float> %a to <2 x i64>
  ret <2 x i64> %r
}

define <2 x float> @test_uitofp_2xi32(<2 x i32> %a) #0 {
; CHECK-LABEL: test_uitofp_2xi32(
; CHECK:       {
; CHECK-NEXT:    .reg .b32 %r<3>;
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.u32 {%r1, %r2}, [test_uitofp_2xi32_param_0];
; CHECK-NEXT:    cvt.rn.f32.u32 %f1, %r2;
; CHECK-NEXT:    cvt.rn.f32.u32 %f2, %r1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f1};
; CHECK-NEXT:    ret;
  %r = uitofp <2 x i32> %a to <2 x float>
  ret <2 x float> %r
}

define <2 x float> @test_uitofp_2xi64(<2 x i64> %a) #0 {
; CHECK-LABEL: test_uitofp_2xi64(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.u64 {%rd1, %rd2}, [test_uitofp_2xi64_param_0];
; CHECK-NEXT:    cvt.rn.f32.u64 %f1, %rd2;
; CHECK-NEXT:    cvt.rn.f32.u64 %f2, %rd1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f1};
; CHECK-NEXT:    ret;
  %r = uitofp <2 x i64> %a to <2 x float>
  ret <2 x float> %r
}

define <2 x float> @test_sitofp_2xi32(<2 x i32> %a) #0 {
; CHECK-LABEL: test_sitofp_2xi32(
; CHECK:       {
; CHECK-NEXT:    .reg .b32 %r<3>;
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.u32 {%r1, %r2}, [test_sitofp_2xi32_param_0];
; CHECK-NEXT:    cvt.rn.f32.s32 %f1, %r2;
; CHECK-NEXT:    cvt.rn.f32.s32 %f2, %r1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f1};
; CHECK-NEXT:    ret;
  %r = sitofp <2 x i32> %a to <2 x float>
  ret <2 x float> %r
}

define <2 x float> @test_sitofp_2xi64(<2 x i64> %a) #0 {
; CHECK-LABEL: test_sitofp_2xi64(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .b64 %rd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.u64 {%rd1, %rd2}, [test_sitofp_2xi64_param_0];
; CHECK-NEXT:    cvt.rn.f32.s64 %f1, %rd2;
; CHECK-NEXT:    cvt.rn.f32.s64 %f2, %rd1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f1};
; CHECK-NEXT:    ret;
  %r = sitofp <2 x i64> %a to <2 x float>
  ret <2 x float> %r
}

define <2 x float> @test_uitofp_2xi32_fadd(<2 x i32> %a, <2 x float> %b) #0 {
; CHECK-LABEL: test_uitofp_2xi32_fadd(
; CHECK:       {
; CHECK-NEXT:    .reg .b32 %r<3>;
; CHECK-NEXT:    .reg .f32 %f<5>;
; CHECK-NEXT:    .reg .b64 %rd<4>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.u32 {%r1, %r2}, [test_uitofp_2xi32_fadd_param_0];
; CHECK-NEXT:    ld.param.b64 %rd1, [test_uitofp_2xi32_fadd_param_1];
; CHECK-NEXT:    cvt.rn.f32.u32 %f1, %r2;
; CHECK-NEXT:    cvt.rn.f32.u32 %f2, %r1;
; CHECK-NEXT:    mov.b64 %rd2, {%f2, %f1};
; CHECK-NEXT:    add.rn.f32x2 %rd3, %rd1, %rd2;
; CHECK-NEXT:    mov.b64 {%f3, %f4}, %rd3;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f3, %f4};
; CHECK-NEXT:    ret;
  %c = uitofp <2 x i32> %a to <2 x float>
  %r = fadd <2 x float> %b, %c
  ret <2 x float> %r
}

define <2 x float> @test_fptrunc_2xdouble(<2 x double> %a) #0 {
; CHECK-LABEL: test_fptrunc_2xdouble(
; CHECK:       {
; CHECK-NEXT:    .reg .f32 %f<3>;
; CHECK-NEXT:    .reg .f64 %fd<3>;
; CHECK-EMPTY:
; CHECK-NEXT:  // %bb.0:
; CHECK-NEXT:    ld.param.v2.f64 {%fd1, %fd2}, [test_fptrunc_2xdouble_param_0];
; CHECK-NEXT:    cvt.rn.f32.f64 %f1, %fd2;
; CHECK-NEXT:    cvt.rn.f32.f64 %f2, %fd1;
; CHECK-NEXT:    st.param.v2.f32 [func_retval0], {%f2, %f1};
; CHECK-NEXT:    ret;
  %r = fptrunc <2 x double> %a to <2 x float>
  ret <2 x float> %r
}

define <2 x double> @test_fpext_2xdouble(<2 x float> %a) #0 {
  %r = fpext <2 x float> %a to <2 x double>
  ret <2 x double> %r
}

define <2 x i32> @test_bitcast_2xfloat_to_2xi32(<2 x float> %a) #0 {
  %r = bitcast <2 x float> %a to <2 x i32>
  ret <2 x i32> %r
}

define <2 x float> @test_bitcast_2xi32_to_2xfloat(<2 x i32> %a) #0 {
  %r = bitcast <2 x i32> %a to <2 x float>
  ret <2 x float> %r
}

define <2 x float> @test_bitcast_double_to_2xfloat(double %a) #0 {
  %r = bitcast double %a to <2 x float>
  ret <2 x float> %r
}

define double @test_bitcast_2xfloat_to_double(<2 x float> %a) #0 {
  %r = bitcast <2 x float> %a to double
  ret double %r
}

attributes #0 = { nounwind }
attributes #1 = { "unsafe-fp-math" = "true" }

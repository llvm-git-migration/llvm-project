// A valid MachO object with a weak-bind table following a bind table ending
// with an effectively no-op opcode `BIND_OPCODE_SET_TYPE_IMM(1)` instead of
// a `BIND_OPCODE_DONE` or an actual bind `BIND_OPCODE_DO_BIND[_*]`.

RUN: yaml2obj %p/Inputs/MachO/bind-table-trailing-opcode.yaml | \
RUN: llvm-objdump --bind --weak-bind --macho - | \
RUN: FileCheck %s

CHECK:      Bind table:
CHECK-NEXT: segment      section            address     type       addend dylib            symbol
CHECK-NEXT: __DATA_CONST __got              0x00008008  pointer         0 libSystem        dyld_stub_binder

CHECK:      Weak bind table:
CHECK-NEXT: segment      section            address     type       addend  symbol
CHECK-NEXT: __DATA_CONST __got              0x00008000  pointer         0  _foo

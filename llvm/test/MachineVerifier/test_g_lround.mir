# RUN: not --crash llc -o - %s -mtriple=x86_64-- -verify-machineinstrs -run-pass=none 2>&1 | FileCheck %s
# REQUIRES: x86-registered-target

---
name:            g_lround
legalized:       true
regBankSelected: false
selected:        false
tracksRegLiveness: true
registers:
  - { id: 0, class: _, preferred-register: '' }
liveins:
body:             |
  bb.0:

    %0:_(<2 x s32>) = IMPLICIT_DEF
    ; CHECK: Bad machine code: operand types must be all-vector or all-scalar
    %1:_(s32) = G_LROUND %0:_(<2 x s32>)
    ; CHECK: Bad machine code: operand types must preserve number of vector elements
    %2:_(<3 x s32>) = G_LROUND %0:_(<2 x s32>)
    %3:_(<2 x s32>) = G_LROUND %0:_(<2 x s32>)

  bb.1:

    ; CHECK: Bad machine code: operand types must be all-vector or all-scalar
    %4:_(s32) = G_LLROUND %0:_(<2 x s32>)
    ; CHECK: Bad machine code: operand types must preserve number of vector elements
    %5:_(<3 x s32>) = G_LLROUND %0:_(<2 x s32>)
    %6:_(<2 x s32>) = G_LLROUND %0:_(<2 x s32>)
...

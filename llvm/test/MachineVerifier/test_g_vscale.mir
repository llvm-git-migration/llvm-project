# RUN: not --crash llc -verify-machineinstrs -run-pass none -o /dev/null %s 2>&1 | FileCheck %s
# REQUIRES: aarch64-registered-target

---
name:            g_vscale
body: |
  bb.0:

  %1:_(s32) = G_CONSTANT 4

  ; CHECK: G_VSCALE operand #1 must be an immediate
  %2:_(s32) = G_VSCALE %1

  ; CHECK: G_VSCALE immediate cannot be zero
  %3:_(s32) = G_VSCALE 0
...
